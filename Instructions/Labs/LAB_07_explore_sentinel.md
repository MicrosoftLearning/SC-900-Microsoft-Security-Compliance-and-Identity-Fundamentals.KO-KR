<!---
---
랩: 제목: 'Microsoft Sentinel 살펴보기' 학습 경로/모듈/제목: '학습 경로: Microsoft 보안 솔루션의 기능 설명, 모듈 3: Microsoft Sentinel의 보안 기능 설명, 단원 3: Microsoft Sentinel의 위협 검색 및 완화 기능 설명'
---
--->

# 랩: Microsoft Sentinel 살펴보기

이 랩에 해당하는 Learn 학습 내용은 다음과 같습니다.

- 학습 경로: Microsoft 보안 솔루션의 기능 설명
- 모듈: Microsoft Sentinel의 보안 기능 설명
- 단원: Microsoft Sentinel의 위협 검색 및 완화 기능 설명

## 랩 시나리오

Microsoft Sentinel 인스턴스를 만드는 프로세스를 살펴봅니다.  그리고 Microsoft Sentinel을 지원하기 위해 배포되는 리소스에 액세스할 수 있도록 권한을 설정합니다.  이 기본 설정이 완료되면 Microsoft Sentinel을 데이터 원본에 연결하고, 통합 문서를 설정하고, Microsoft Sentinel에서 사용할 수 있는 몇 가지 주요 기능을 간단히 연습하는 단계를 진행합니다.

**예상 시간:** 45~60분

### 작업 1

Microsoft Sentinel 인스턴스 만들기

1. Azure 서비스 홈 페이지가 표시되어 있어야 합니다.  이전에 브라우저를 닫았다면 Microsoft Edge를 엽니다. 주소 표시줄에 **portal.azure.com**을 입력하고 관리자 자격 증명을 사용하여 로그인합니다.

1. 페이지 위쪽 파란색 검색 상자에 **Microsoft Sentinel**을 입력하고 검색 결과에서 **Microsoft Sentinel**을 선택합니다.

1. Microsoft Sentinel 페이지에서 **Microsoft Sentinel 만들기**를 선택합니다.

1. 작업 영역에 Microsoft Sentinel 추가 페이지에서 **새 작업 영역 만들기**를 선택합니다.

1. Log Analytics 작업 영역 만들기의 기본 탭에서 다음 정보를 입력합니다.
    1. 구독: 기본값을 그대로 둡니다. ALH(권한 있는 랩 호스터)에서 제공하는 Azure 구독입니다.
    1. 리소스 그룹: **SC900-Sentinel-RG**를 선택합니다. 이 리소스 그룹이 목록에 없으면 **새로 만들기**를 선택하고 이름으로 **SC900-Sentinel-RG**를 입력한 다음 **확인**을 선택하여 해당 그룹을 만듭니다.
    1. 이름: **SC900-LogAnalytics-workspace**를 입력합니다.
    1. 지역: **미국 동부**를 선택합니다(위치에 따라 다른 기본 지역을 선택할 수 있음).
    1. **검토 + 만들기**를 선택합니다(태그가 구성되지 않음).
    1. 입력한 정보를 확인하고 **만들기**를 선택합니다.
    1. 새 작업 영역이 목록에 표시되려면 1~2분 정도 걸릴 수 있습니다. 2분이 지났는데 작업 영역이 표시되지 않으면 **새로 고침**, **추가**를 차례로 선택합니다.

1. 새 작업 영역이 추가되면 Microsoft Sentinel | 뉴스 및 가이드 페이지가 표시되어 Microsoft Sentinel 평가판이 활성화되었음을 나타냅니다.  **확인**을 선택합니다.  시작 페이지에는 3단계가 표시됩니다.

1. 다음 작업에서 사용할 수 있도록 이 페이지를 열어 두세요.

### 작업 2

Microsoft Sentinel 인스턴스를 만들면 Microsoft Sentinel을 지원할 책임이 있는 사용자가 필요한 권한을 갖는 것이 중요합니다.  이 작업은 지정된 사용자에게 필요한 역할 권한을 할당하여 수행됩니다.  이 작업에서는 사용할 수 있는 기본 제공 Microsoft Sentinel 역할을 확인합니다.

1. 파란색 검색 상자에 **리소스 그룹**을 입력한 다음 검색 결과에서 **리소스 그룹**을 선택합니다. 

1. 리소스 그룹 페이지에서 Microsoft Sentinel을 사용하여 만든 리소스 그룹인 **SC900-Sentinel-RG**를 선택합니다.  리소스 그룹 수준에서 작업하면 선택한 모든 역할이 이전 작업에서 만든 Microsoft Sentinel 인스턴스의 일부인 모든 리소스에 적용됩니다.

1. SC900-Sentinel-RG 페이지의 왼쪽 탐색 패널에서 **액세스 제어(IAM)** 를 선택합니다.

1. 액세스 제어 페이지에서 **내 액세스 권한 보기**를 선택합니다.  권한 있는 랩 호스터에서 제공한 Azure 구독의 경우 설명에 표시된 대로 필요한 모든 리소스를 관리할 수 있는 액세스 권한을 부여하는 역할이 정의되었습니다. 그러나 사용 가능한 Sentinel 특정 역할을 이해하는 것이 중요합니다.  창 오른쪽 위의 **X**를 선택하여 할당 창을 닫습니다.

1. 액세스 제어 페이지에서 페이지 맨 위에 있는 **역할** 탭을 선택합니다.
    1. 검색 상자에 **Microsoft Sentinel**을 입력하여 Microsoft Sentinel과 연결된 기본 제공 역할을 확인합니다.
    1. 나열된 역할 중 하나에서 **보기**를 선택하여 해당 역할의 세부 정보를 봅니다.  모범 사례에 따라 역할에 필요한 최소 권한을 할당해야 합니다.  
    1. 창의 오른쪽 맨 위에 있는 **X**를 선택하여 창을 닫습니다.

1. 액세스 제어 페이지에서 창 오른쪽 맨 위에 있는 **X**를 선택하여 창을 닫습니다.

1. 창 왼쪽 위에서 'Microsoft Azure'가 표시된 파란색 막대 바로 아래의 **홈**을 선택하여 Azure 서비스 홈 페이지로 돌아옵니다.

1. Azure 탭은 브라우저에 열어 두세요.

### 작업 3

이 작업에서는 데이터 원본에 연결하는 단계를 진행합니다. 대다수 데이터 커넥터는 분석 규칙, 통합 문서, 플레이북 등의 관련 콘텐츠와 함께 Microsoft Sentinel 솔루션의 구성 요소로 배포됩니다. Microsoft Sentinel 콘텐츠 허브는 기본 제공 콘텐츠를 검색하고 관리할 수 있는 중앙 위치입니다. 이 단계에서는 콘텐츠 허브를 사용하여 Microsoft Sentinel에서 사용할 클라우드용 Microsoft Defender 솔루션을 배포합니다.  이 솔루션을 사용하면 클라우드용 Microsoft Defender에서 보고되는 보안 경고를 수집할 수 있습니다.

1. Azure 서비스 홈 페이지에서 Microsoft Sentinel을 선택하고 앞에서 만든 **SC900-LogAnalytics-workspace** 인스턴스를 선택합니다.

1. 왼쪽 탐색 패널에서 **콘텐츠 허브**를 선택합니다.

1. 아래로 스크롤하여 사용 가능한 여러 가지 솔루션 목록과 해당 목록을 필터링할 수 있는 옵션을 잠시 살펴봅니다.  이 작업에서는 **클라우드용 Microsoft Defender**를 찾습니다.  목록에서 해당 솔루션을 선택합니다.  옆쪽 창이 열리면 설명을 확인하고 **설치**를 선택합니다.  이 솔루션에는 데이터 커넥터와 분석 규칙이 하나씩 포함되어 있습니다. 솔루션 설치는 1분 정도 걸릴 수 있습니다.  **관리**를 선택합니다.

1. 클라우드용 Microsoft Defender 옆의 확인란을 선택합니다.  페이지 오른쪽에 창이 열립니다.  **커넥터 페이지 열기**를 선택합니다.

1. 구성 지침을 살펴봅니다.  구독 이름 옆의 확인란을 선택하고 **연결**을 선택합니다.  보안 읽기 권한자 권한이 있는 구독에서만 클라우드용 Microsoft Defender 경고 스트리밍이 시작된다는 메시지가 포함된 팝업 창이 표시될 수 있습니다.  **확인**을 선택합니다.  상태가 연결됨으로 바뀝니다.  이제 커넥터가 사용하도록 설정되었습니다. 커넥터가 데이터 커넥터 페이지에 표시되려면 시간이 다소 걸릴 수도 있습니다.  

1. 이제 분석 규칙 관련 정보를 확인합니다.  페이지 위쪽의 이동 경로에서 **클라우드용 Microsoft Defender**를 선택합니다. 커넥터는 이미 구성했으므로 클라우드용 Microsoft Defender 옆의 확인란 선택을 취소합니다. 경고 아이콘이 사라질 때까지 시간이 다소 걸릴 수도 있습니다. **관련 보안 경고에서 CoreBackUp 삭제 활동 검색** 옆의 확인란을 선택합니다. 그러면 열리는 창에 규칙 및 해당 규칙의 용도 관련 정보가 표시됩니다.  
    1. 자세한 규칙 논리는 기본 사항 과정에서 다루는 내용이 아닙니다. 여기서는 규칙 구성 단계를 살펴보면서 규칙의 일부분으로 구성 가능한 정보의 유형만 확인하면 됩니다. **구성**을 선택합니다.
    1. **관련 보안 경고에서 CoreBackUp 삭제 활동 검색** 규칙을 선택합니다.
    1. 페이지 오른쪽에 열리는 창에서 **규칙 만들기**를 선택합니다.
    1. 각 구성 페이지에서 구성을 검토한 후 **검토 + 만들기**, **저장**을 차례로 선택합니다.

1. 페이지 위쪽 이동 경로의 분석 규칙 아래에서 **Microsoft Sentinel | 콘텐츠 허브**를 선택하여 Sentinel 페이지로 돌아옵니다.

1. 다음 작업에서 사용할 수 있도록 이 페이지를 열어 두세요.


### 작업 4

이 작업에서는 Sentinel에서 사용할 수 있는 옵션 중 일부를 살펴봅니다.

1. 왼쪽 탐색 패널에서 **헌팅**을 선택합니다.  페이지 위쪽에서 **쿼리** 탭을 선택한 후 헌팅 쿼리의 설명을 확인합니다. 콘텐츠 허브를 통해 헌팅 쿼리를 추가할 수 있습니다. 이 탭에는 이전에 설치한 쿼리가 표시됩니다. **콘텐츠 허브로 이동**을 선택합니다.  콘텐츠 허브에는 솔루션의 일부분인 쿼리나 독립 실행형 쿼리가 포함된 콘텐츠 목록이 표시됩니다.  아래로 스크롤하여 사용 가능한 옵션을 확인합니다. 창 오른쪽 위의 **X**를 선택하여 콘텐츠 허브를 닫습니다.

1. 왼쪽 탐색 패널에서 **MITRE ATT&CK**를 선택합니다.  MITRE ATT&CK는 공격자가 일반적으로 사용하는 전술 및 기술과 관련하여 공개적으로 액세스할 수 있는 기술 자료입니다. Microsoft Sentinel을 사용하면 MITRE ATT&CK® 프레임워크의 전술 및 기술에 따라 작업 영역에서 이미 활성화된 탐지와 구성할 수 있는 탐지를 보고 조직의 보안 범위를 파악할 수 있습니다.  행렬에서 셀을 선택하고 화면 오른쪽에 제공되는 정보를 확인합니다. **참고**: 창의 맨 오른쪽에서 "**<<**"을 선택해야 정보 패널이 표시될 수도 있습니다.

1. 왼쪽 탐색 패널에서 **커뮤니티**를 선택합니다. Microsoft 보안 분석가들은 새로운 통합 문서, 플레이북 및 헌팅 쿼리를 지속적으로 만들고 추가하며, 작업 환경에서 사용할 수 있게 커뮤니티에 게시하고 있습니다. 화면 오른쪽에서 **커뮤니티 콘텐츠 온보딩**을 선택합니다.  GitHub 리포지토리에 대한 새 탭이 열리고, 여기서 콘텐츠를 다운로드하여 시나리오를 사용하도록 설정할 수 있습니다. README.md 섹션까지 아래로 스크롤하여 설명을 검토합니다. 브라우저에서 Azure 탭으로 돌아옵니다.

1. 왼쪽 탐색 패널에서 **분석**을 선택합니다.  활성 규칙 2개(기본 제공 규칙과 이전 작업에서 만든 규칙)가 표시됩니다. 기본 규칙인 **고급 다단계 공격 탐지**를 선택합니다.  세부 정보를 확인합니다.  Microsoft Sentinel은 확장 가능한 기계 학습 알고리즘을 기반으로 하는 상관 관계 엔진인 Fusion을 사용하여 킬 체인의 다양한 단계에서 관찰되는 비정상적인 동작과 의심스러운 작업의 조합을 식별하여 다단계 공격(지능형 지속적 위협이라고도 함)을 자동으로 탐지합니다. 이러한 발견을 기반으로 Microsoft Sentinel은 포착하기 어려운 인시던트를 생성합니다. **참고**: 창의 맨 오른쪽에서 "**<<**"을 선택해야 정보 패널이 표시될 수도 있습니다.

1. 왼쪽 탐색 패널에서 **자동화**를 선택합니다.  여기서는 간단한 자동화 규칙을 만들거나, 기존 플레이북과 통합하거나, 새 플레이북을 만들 수 있습니다.  **+ 만들기**, **자동화 규칙**을 차례로 선택합니다.  화면 오른쪽에 열린 창과 조건 및 작업을 만드는 데 사용할 수 있는 옵션을 확인합니다.  페이지 아래쪽에서 **취소**를 선택합니다.

1. 왼쪽 탐색 패널에서 **통합 문서**를 선택합니다. Microsoft Sentinel 통합 문서의 설명을 확인합니다.  콘텐츠 허브를 통해 통합 문서를 추가할 수 있습니다. 여기에는 이전에 설치한 통합 문서가 표시됩니다. **콘텐츠 허브로 이동**을 선택합니다.  콘텐츠 허브에는 솔루션의 일부분인 통합 문서나 독립 실행형 통합 문서가 포함된 콘텐츠 목록이 표시됩니다. 아래로 스크롤하여 사용 가능한 옵션을 확인합니다.

1. 창의 오른쪽 맨 위에 있는 **X**를 선택하여 창을 닫습니다.

1. 창 왼쪽 위의 파란색 막대 바로 아래에서 **홈**을 선택하여 Azure Portal 홈 페이지로 돌아옵니다.

1. 열려 있는 모든 브라우저 탭에서 로그아웃한 후 탭을 모두 닫습니다.

### 검토

데모의 4부에서는 Microsoft Sentinel을 데이터 원본에 연결하는 단계를 진행하고 통합 문서를 설정했으며 Microsoft Sentinel에서 사용할 수 있는 여러 옵션을 살펴보았습니다.
