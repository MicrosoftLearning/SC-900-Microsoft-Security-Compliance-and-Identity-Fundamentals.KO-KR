---
lab:
  title: Microsoft Entra 조건부 액세스
  module: Describe the access management capabilities of Microsoft Entra ID
---

# 랩: Microsoft Entra 조건부 액세스

이 랩에 해당하는 Learn 학습 내용은 다음과 같습니다.

- 학습 경로: Microsoft Entra의 기능 설명
- 모듈: Microsoft Entra ID의 액세스 관리 기능 설명
- 단원: 조건부 액세스 설명

## 랩 시나리오

이 랩에서는 관리자와 사용자 측면에서 조건부 액세스 MFA를 살펴봅니다.  구체적으로는 관리자로 로그인하여 사용자가 Microsoft 관리 포털에 액세스할 때 다단계 인증을 진행하도록 요구하는 정책을 만듭니다.  사용자 측면에서는 MFA에 등록하는 프로세스를 포함한 조건부 액세스 정책의 영향을 확인할 수 있습니다.

**예상 시간:** 30분

### 작업 1

이 작업에서는 관리자로 로그인하여 Debra Berger 사용자의 암호를 재설정합니다.  이 단계를 진행해야 후속 작업에서 해당 사용자로 처음 로그인할 수 있습니다.

1. Microsoft Edge를 엽니다.  주소 표시줄에 **https://entra.microsoft.com**을 입력하고 관리자 자격 증명을 사용하여 로그인합니다.
    1. 로그인 창에 **admin@WWLxZZZZZZ.onmicrosoft.com**을 입력하고(여기서 ZZZZZZ는 랩 호스팅 공급자가 제공한 고유 테넌트 ID) **다음**을 선택합니다.
    1. 랩 호스팅 공급자가 제공한 관리자 암호를 입력합니다. **로그인**을 선택합니다.
    1. 로그인 상태를 유지할지 묻는 메시지가 표시되면 **예**를 선택합니다.

1. 왼쪽 탐색 창에서 **ID** > **사용자**를 차례로 확장하고 **모든 사용자**를 선택합니다.

1. 사용자 목록에서 **Debra Berger**를 선택합니다.

1. 페이지 위쪽에서 **암호 재설정**을 선택합니다. 이전에 Debra Berger로 로그인한 적이 없어 이 사용자의 암호를 알 수 없으므로 암호를 재설정해야 합니다.

1. 암호 재설정 창이 열리면 **암호 재설정**을 선택합니다.  중요: 다음 작업에서 사용자로 로그인하려면 새 암호가 필요하므로 새 암호를 적어 두세요.

1. 페이지 오른쪽 위에서 **X**를 선택하여 암호 재설정 창을 닫은 후 페이지 오른쪽 위에서 **X**를 선택하여 Debra Berger로 로그인되어 있는 창을 닫습니다.

1. 왼쪽 탐색 패널에서 **홈**을 선택하여 Microsoft Entra 관리 센터로 돌아옵니다.

1. 이 창을 열어 둡니다.

### 작업 2

이 작업에서는 Microsoft Entra ID에서 조건부 액세스 정책을 만드는 프로세스를 진행합니다.

1. 브라우저 탭을 열고 Microsoft Entra 관리 센터 홈 페이지로 이동합니다.   이전에 브라우저 탭을 닫았다면 Microsoft Edge를 열고 주소 표시줄에 **https://entra.microsoft.com**을 입력한 후 ALH에서 제공한 Microsoft 365 관리자 자격 증명으로 로그인합니다.

1. 왼쪽 탐색 창에서 **보호**를 확장하고 **조건부 액세스**를 선택합니다.

1. 조건부 액세스 개요 페이지가 표시됩니다.  이 페이지의 타일에는 정책 요약 및 일반 경고가 표시됩니다.  왼쪽 탐색 패널에서 **정책**을 선택합니다.

1. 왼쪽 탐색 패널에서 **정책**을 선택합니다. 이 화면에는 기존 조건부 액세스 정책의 목록이 표시됩니다. **+ 새 정책**을 선택합니다.

1. 이름 필드에 **MFA 테스트 정책**을 입력합니다.

1. 사용자에서 **선택된 사용자 및 그룹 0개**를 선택합니다.

1. 이제 사용자 또는 그룹 포함 또는 제외 옵션이 표시됩니다.  **포함**이 선택되어 있는지(밑줄이 표시되어 있는지) 확인합니다.

1. **사용자 및 그룹 선택** 옵션을 선택하고 **사용자 및 그룹**을 선택합니다.  사용자 및 그룹 선택 창이 열립니다.  

1. 검색 창에 **Debra**를 입력합니다.  검색 창 아래에서 **Debra Berger**를 선택하고 페이지 아래쪽의 **선택** 단추를 누릅니다.  일반적으로는 그룹의 사용자에게 정책을 할당해야 합니다.  이 랩에서는 편의상 특정 사용자에게 정책을 할당하겠습니다.

1. 대상 리소스에서 **선택한 대상 리소스 없음**을 선택합니다.

1. **이 정책을 적용할 항목을 선택합니다.** 아래의 필드에서 드롭다운 화살표를 선택하고 사용 가능한 옵션을 확인합니다.  기본 설정인 **클라우드 앱**을 그대로 유지합니다.  **포함** 탭에 밑줄이 표시되어 있는지 확인합니다.  **앱 선택**을 선택하고 **선택** 아래에서 **없음**을 선택합니다.  클라우드 앱 선택 창이 열립니다.

1. **Microsoft 관리 포털**을 선택한 다음 페이지 아래쪽에서 **선택** 키를 누릅니다.  경고를 확인합니다.  

1. 조건에서 **조건 0개 선택됨**을 선택합니다.  구성할 수 있는 다양한 옵션을 살펴봅니다.  정책을 통해 사용자 위험, 로그인 위험, 디바이스 플랫폼, 위치, 클라이언트 앱, 디바이스용 필터를 비롯한 조건에서 생성되는 신호에 따라 사용자 액세스를 제어할 수 있습니다.  여기서는 이러한 구성 가능 옵션을 살펴보되 조건은 설정하지 않습니다.

1. 이제 액세스 컨트롤을 설정합니다.  허용 아래에서 **컨트롤 0개 선택됨**을 선택합니다.

1. 허용 창이 열립니다.  **액세스 권한 부여**가 선택되어 있는지 확인하고 **다단계 인증 필요**를 선택합니다. 오른쪽 창에서 조금 아래로 스크롤하고 여러 컨트롤의 경우 섹션 아래에서 기본값**선택한 모든 컨트롤 필요**를 그대로 유지합니다.  페이지 아래쪽의 **선택**을 누릅니다.

1. 페이지 아래쪽의 정책 사용에서 **켜기**를 선택한 다음 **만들기**를 선택합니다.

1. 왼쪽 탐색 창에서 **정책**을 선택합니다. 조건부 액세스 정책 목록에 MFA 파일럿 정책이 표시됩니다. 필요한 경우 페이지 위쪽 명령 모음에서 **새로 고침 아이콘**을 선택합니다.

1. 화면 오른쪽 위의 이메일 주소 옆에 있는 사용자 아이콘을 선택한 후 **로그아웃**을 선택하여 로그아웃합니다. 그런 다음 브라우저 창을 모두 닫습니다.

### 작업 3

이 작업에서는 사용자인 Debra Berger의 측면에서 조건부 액세스 정책의 영향을 확인할 수 있습니다. 먼저 조건부 액세스 정책에 포함되지 않은 애플리케이션에 로그인합니다(Microsoft 365 포털: https://login.microsoftonline.com)).  그런 다음 조건부 액세스 정책에 포함되어 있는 애플리케이션을 대상으로 같은 프로세스를 반복합니다(Azure Portal: https://portal.azure.com)).  이 정책은 사용자가 Azure Portal을 비롯한 Microsoft 관리 포털에 액세스할 때 MFA를 진행해야 하도록 지정합니다.  MFA를 사용하려는 사용자는 먼저 MFA에서 사용할 인증 방법을 등록해야 합니다. 예를 들어 모바일 디바이스나 인증자 애플리케이션으로 코드를 전송하는 등의 방법을 선택해야 합니다.

1. Microsoft Edge를 엽니다.  주소 표시줄에 **https://login.microsoftonline.com**을 입력합니다.
    1. **DebraB@WWLxZZZZZZ.onmicrosoft.com**으로 로그인하고(여기서 ZZZZZZ는 랩 호스팅 공급자가 제공한 고유 테넌트 ID) **다음**을 선택합니다.
    1. 이전 작업에서 적어 둔 암호를 입력합니다. **로그인**을 선택합니다.
    1. 관리자가 암호를 재설정할 때 제공된 암호는 임시 암호이므로 암호를 업데이트해야 합니다(암호 업데이트는 MFA 정책에 포함되지 않음). 현재 암호와 새 암호를 차례로 입력하고 확인을 위해 새 암호를 다시 입력합니다.  작업을 완료하려면 필요하므로 새 암호를 적어 둡니다.
    1. 로그인 상태를 유지할지 묻는 메시지가 표시되면 **예**를 선택합니다.  Microsoft 365 계정에 로그인했습니다. 이 애플리케이션은 정책 적용 대상이 아니므로 MFA를 진행할 필요가 없었습니다.

1. 이제 MFA 기준을 충족하는 애플리케이션에 로그인을 시도합니다. 새 브라우저 탭을 연 다음 **https://portal.azure.com**을 입력합니다.

1. 추가 정보가 필요하다는 창이 표시됩니다.  **다음**을 선택합니다.  이렇게 하면 조건부 액세스 정책에서 식별된 클라우드 앱에 처음 액세스하는 경우와 마찬가지로 MFA 등록 프로세스가 시작됩니다.  등록 프로세스는 한 번만 진행하면 됩니다.   관리자가 사용할 인증 방법을 구성하여 사용자가 등록 프로세스를 진행하도록 할 수도 있습니다.

1. 계정 보안 유지 창에서 MFA에 사용할 방법을 선택할 수 있습니다.  Microsoft Authenticator도 선택 가능한 옵션이지만 이 랩 연습에서는 편의상 다른 방법을 선택합니다.  **다른 방법을 설정하고 싶습니다.** 를 선택합니다.  다른 방법 선택 팝업 창에서 **드롭다운 화살표**를 선택하고 **전화**를 선택한 후에 **확인**을 선택합니다.

1. 창이 열리면 국가가 선택되었는지 확인한 다음 사용하려는 휴대폰 번호를 입력합니다.  **코드를 문자로 받기**가 선택되었는지 확인하고 **다음**을 누릅니다.  휴대폰에서 코드 입력이라고 표시된 곳에 입력해야 하는 코드가 포함된 문자 메시지를 받게 됩니다.  받은 코드를 입력하고 **다음**을 누릅니다.  확인되면 화면에 “SMS가 확인되었습니다. 휴대폰이 등록되었습니다.”  **다음**을 선택합니다. 그런 다음 **완료**를 선택합니다.  그러면 1회 등록 프로세스가 완료됩니다.

1. 이제 Azure Portal에 액세스할 수 있습니다.  Azure Portal은 Microsoft 관리 포털이므로, 앞에서 만든 조건부 액세스 정책에 따라 다단계 인증을 진행해야 합니다.  
    1. 로그인 시간이 초과되었다는 메시지가 나타나면 암호를 입력하고 **로그인**을 선택합니다.
    1. ID를 확인해야 하는 창이 표시됩니다.  Text =XXXXXXXXX라고 표시된 곳을 선택하여 휴대폰으로 코드를 받고 코드를 입력한 다음 **확인**을 선택합니다.
    1. 로그인 상태를 유지할지 묻는 메시지가 표시되면 **아니요**를 선택합니다.

1. 화면 오른쪽 위의 이메일 주소 옆에 있는 사용자 아이콘을 선택한 후 로그아웃을 선택하여 로그아웃합니다. 그런 다음 브라우저 창을 모두 닫습니다.

### 검토

이 랩에서는 Microsoft 관리 포털에 액세스하는 사용자가 MFA를 진행해야 하도록 지정하는 조건부 액세스 정책 설정 프로세스를 수행했습니다.  그런 후에 사용자로 로그인하여 MFA 등록 프로세스를 진행했으며, Azure Portal에 액세스할 때 MFA를 사용하도록 지정하는 조건부 액세스 정책의 영향을 확인했습니다.
